
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Approximating PI with PureScript - while true live</title>
  <meta name="author" content="Gregor Riegler">

  
  <meta name="description" content="Oh, it is Pi day! To be honest, I had not known about it until today
but it somehow made it into my Twitter stream. Well, after some relaxed Saturday &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://sleepomeno.github.io/blog/2015/03/14/Approximating-PI-with-PureScript/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/data-table.css" media="screen, projection" rel="stylesheet" type="text/css" />

  <!--<script src="/javascripts/modernizr-2.0.js"></script>-->
  <!--<script src="/javascripts/ender.js"></script>-->
  <!--<script src="/javascripts/octopress.js" type="text/javascript"></script>-->
  <link href="/atom.xml" rel="alternate" title="while true live" type="application/atom+xml">
  <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<script type="text/javascript" src="/assets/app-c0f18cf1eab0ab482c858c55c0da5377.js"></script>

<script id="search-results-template" type="text/x-handlebars-template">
  {{#entries}}
    <article>
      <h3>
         <small><time datetime="{{date}}" pubdate>{{date}}</time></small>
         <a href="{{url}}">{{title}}</a>
         <!--<p>tagged: {{ tags }} | category: <a href="blog/categories/{{category }}">{{category}}</a></p>-->
				 <p>tagged: {{{ tags }}} | category: {{{category}}}</p>
      </h3>
    </article>
  {{/entries}}
</script>


<script type="text/javascript">
var a=window;a.dT_?a.console&&a.console.log("Duplicate agent injection detected, turning off redundant initConfig."):navigator.userAgent&&0<=navigator.userAgent.indexOf("RuxitSynthetic")||navigator.cookieEnabled&&(window.dT_||(window.dT_={cfg:"app=E7D6DA7F2130BD60|cors=1|featureHash=A2SVfqr|lastModification=1514058355530|dtVersion=10133171206150114|reportUrl=https://bf73928lgc.bf.dynatrace.com/bf|tp=500,50,0,1|featureHash=A2SVfqr|agentUri=https://js-cdn.dynatrace.com/jstag/15fc9f135f3/ruxitagent_A2SVfqr_10133171206150114.js|auto=|domain=|rid=RID_|rpid=|app=E7D6DA7F2130BD60"}));(function(){function m(){var a=0;try{a=la.performance.timing.navigationStart+Math.floor(la.performance.now())}catch(c){}return 0>=a||isNaN(a)?(new Date).getTime():a}function ma(a,c){return na(a,c)}function g(a,c){for(var d=1;d<arguments.length;d++)a.push(arguments[d])}function oa(a){g(pa,a)}function n(a,c){return parseInt(a,c||10)}function qa(a){try{if(R)return R[a]}catch(c){}return null}function ra(a,c){try{window.sessionStorage.setItem(a,c)}catch(d){}}function f(a,c){var d=-1;c&&a&&a.indexOf&&(d=
a.indexOf(c));return d}function sa(a){document.cookie=a+'="";path=/'+(e.domain?";domain="+e.domain:"")+"; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}function ta(a){a=encodeURIComponent(a);var c=[];if(a)for(var d=0;d<a.length;d++){var r=a.charAt(d);g(c,$a[r]||r)}return c.join("")}function C(a,c,d,r){ua(function(){if(c||0===c){c=(""+c).replace(/[;\n\r]/g,"_");c="DTSA"===a.toUpperCase()?ta(c):c;var b=a+"="+c+";path=/"+(e.domain?";domain="+e.domain:"");d&&(b+=";expires="+d.toUTCString());r&&(b+=";Secure");
document.cookie=b}else sa(a)})}function t(a){var c,d,r,b=document.cookie.split(";");for(c=0;c<b.length;c++)if(d=f(b[c],"="),r=b[c].substring(0,d),d=b[c].substring(d+1),r=r.replace(/^\s+|\s+$/g,""),r===a)return"DTSA"===a.toUpperCase()?decodeURIComponent(d):d;return""}function va(a){var c=/^[0-9A-Za-z_\$\+\/\.\-\*%\|]*$/.test(a);return 0>=f(a,"$")||a&&2<a.split("$").length?!1:c}function S(){var a=t(w);return a&&va(a)?a:""}function T(a){C(w,a,void 0,b.bcv("ssc"))}function wa(a){a=a||S();var c={sessionId:null,
v:null};if(a){var d=f(a,"|"),b=a;-1!==d&&(b=a.substring(0,d));d=f(b,"$");-1!==d?(c.sessionId=b.substring(d+1),c.v=b.substring(0,d)):c.sessionId=b}return c}function I(a){try{if("undefined"!==typeof window.DynatraceJsBridge&&"undefined"!==typeof window.DynatraceJsBridge.getServerId())return window.DynatraceJsBridge.getServerId()}catch(c){}return wa(a).v}function J(a){if(a)return wa(a).sessionId;if(a=S()){var c=f(a,"|");-1!=c&&(a=a.substring(0,c))}return a}function x(a,c){return Math.floor(Math.random()*
(c-a+1))+a}function K(a){var c=window.crypto||window.msCrypto,d;if(c)d=new Int8Array(a),c.getRandomValues(d);else for(d=[],c=0;c<a;c++)d.push(x(0,32));a=[];for(c=0;c<d.length;c++){var b=Math.abs(d[c]%32);a.push(String.fromCharCode(b+(9>=b?48:55)))}return a.join("")}function xa(a){return document.getElementsByTagName(a)}function ya(a){var c=a.length;if("number"===typeof c)a=c;else{for(var c=0,d=2048;a[d-1];)c=d,d+=d;for(var b=7;1<d-c;)b=(d+c)/2,a[b-1]?c=b:d=b;a=a[b]?d:c}return a}function za(a){var c=
{};a=a.split("|");for(var d=0;d<a.length;d++){var b=a[d].split("=");2==b.length&&(c[b[0]]=decodeURIComponent(b[1].replace(/\+/g," ")))}return c}function D(a,c,d){c=c||{};a=a.split("|");for(var b=0;b<a.length;b++){var e=f(a[b],"="),k;-1===e?(k=a[b],c[k]="1"):(k=a[b].substring(0,e),c[k]=a[b].substring(e+1,a[b].length))}!d&&(d=c,a=d.spc)&&(b=document.createElement("textarea"),b.innerHTML=a,d.spc=b.value);return c}function U(a){return a in e?e[a]:V[a]}function l(a){a=U(a);return"false"===a||"0"===a?!1:
!!a}function ab(a,c){e[a]=c}function Aa(a){var c=location.hostname;return c&&a?c==a||-1!==c.indexOf("."+a,c.length-("."+a).length):!0}function W(a){e[a]=0>f(e[a],"#"+a.toUpperCase())?e[a]:""}function bb(a,c){var d={};e.legacy="1";if(a){var b=/([a-zA-Z]*)[0-9]{0,4}_([a-zA-Z_0-9]*)_([0-9]+)/g.exec(a);b&&b.length&&(d.csu=b[1],d.featureHash=b[2],d.agentLocation=a.substr(0,f(a,b[1])-1),d.buildNumber=b[3])}c&&D(c,d,!0);Aa(d.domain)||(delete d.domain,d.domainOverride=location.hostname+","+d.domain);return d}
function Ba(a){var c=a.agentUri;c&&-1<f(c,"_")&&(c=/([a-zA-Z]*)[0-9]{0,4}_([a-zA-Z_0-9]*)_[0-9]+/g.exec(c),a.csu=c[1],a.featureHash=c[2])}function Ca(a){a.bp=a.bp||V.bp;a.bp2&&(a.bp=2);Aa(e.domain)||(e.domainOverride=location.hostname+","+e.domain,delete e.domain)}function L(a){var c=document.cookie?document.cookie.split(a).length-1:0;if(1<c){var d=e.domain||window.location.hostname,b=window.location.hostname,p=window.location.pathname,k=0,g=0;y.push(a);do{var h=b.substr(k);if(h!=d||"/"!==p){var f=
a,m=h==d?null:h,l=p,n=1,t=0;do document.cookie=f+'=""'+(m?";domain="+m:"")+";path="+l.substr(0,n)+"; expires=Thu, 01 Jan 1970 00:00:01 GMT;",n=l.indexOf("/",n),t++;while(-1!=n&&5>t);f=document.cookie?document.cookie.split(a).length-1:0;f<c&&(y.push(h),c=f)}k=b.indexOf(".",k)+1;g++}while(0!=k&&10>g&&1<c)}}function Da(a,c){var d=document.createElement("script");d.setAttribute("src",a);c&&d.setAttribute("defer","true");d.setAttribute("crossorigin","anonymous");var b=document.getElementsByTagName("script")[0];
b.parentElement.insertBefore(d,b)}function Ea(a){return M+"/"+E+"_"+a+"_"+(e.buildNumber||b.version)+".js"}function cb(){if(document.currentScript){var a=document.currentScript.src;if(a)for(var c=-1==f(a,"_bs")&&-1==f(a,"_bootstrap")&&-1==f(a,"_complete")?1:2,d=a.lastIndexOf("/"),b=0;b<c&&-1!=d;b++)a=a.substr(0,d),d=a.lastIndexOf("/");return a}return null}function Fa(){var a=t("rxVisitor");if(!a||""==a||a.length&&45!=a.length)a=qa("rxVisitor"),a&&45==a.length||(Ga=!0,a=m()+"",a+=K(45-a.length));var c=
a,d=new Date;d.setFullYear(d.getFullYear()+2);C("rxVisitor",c,d,b.bcv("ssc"));ra("rxVisitor",c);return a}function X(a){var c=Ha(a);c||(c=N(a,!0));Y=!1;return c}function Ha(a){return!Y&&a||null==(Z()||window.rx_visitID)?(a=O(!0))&&1<=a.length&&!(aa()<=m())?(P(!1),"sessionIDorRunIDMissing"==a[0].visitId?null:a[0].visitId):null:null}function P(a){var c=m(),d=Ia().j;a&&(d=c);C("rxvt",c+Ja+"|"+d,void 0,b.bcv("ssc"));Ka()}function La(a){a||(a=x(1,1E6));var c=J();c||(c=-1*x(2,21)+"$"+K(32),T(c),c=J(c));
a=""+a;for(var d=a.length,b=[],e=0;e<c.length;e++)b[e]=String.fromCharCode(65+Math.abs((c.charCodeAt(e)^a.charCodeAt(e%d))%26));return b.join("")}function ba(a){var c=O(!1);ca(c,a);P(!0)}function N(a,c){c&&(da=!0);var d;a:{if(Y||!a||Z())if(d=Z()||window.rx_visitID){window.rx_visitID=null;break a}d=null}var b=m();d||(d=La(b));ba(d);return d}function Z(){return b.rx_visitID||e.rx_visitID}function Ka(){ea&&clearTimeout(ea);ea=ma(Ma,aa()-m())}function Ma(){if(aa()<=m()&&!l("coo")){var a=La(m());ba(a);
return!0}Ka();return!1}function Ia(){var a={m:0,j:0},c=t("rxvt");if(c)try{var d=c.split("|");2==d.length&&(a.m=parseInt(d[0],10),a.j=parseInt(d[1],10))}catch(r){}return a}function aa(){var a=Ia();return Math.min(a.m,a.j+Na)}function Oa(a,c){for(var d=O(c),b=!1,e=0;e<d.length;e++)d[e].frameId===z&&(d[e].b=a,b=!0);b||g(d,{frameId:z,b:a});ca(d)}function ca(a,c){var d="",e=!1;if(a){for(var d=[],f=0;f<a.length;f++)"-"!=a[f].b&&(e=!0,0<f&&0<d.length&&g(d,"p"),g(d,q),g(d,"$"),g(d,a[f].frameId),g(d,"h"),
g(d,a[f].b));d.length||(F&&(N(!1,!0),F=!1),q=I(),g(d,q),g(d,"$"),g(d,z),g(d,"h-"));g(d,"v");g(d,c||X(e));d=d.join("")}d||(F&&(N(!1,!0),F=!1),q=I(),d=q+"$"+z+"h-v"+(c||X(!1)));e=d;try{"undefined"!==typeof window.DynatraceJsBridge&&"undefined"!==typeof window.DynatraceJsBridge.setDtPc&&window.DynatraceJsBridge.setDtPc(e)}catch(k){}C(G,e,void 0,b.bcv("ssc"))}function O(a){var c=t(G),b=[];if(c&&"-"!==c)for(var c=c.split("p"),e=0;e<c.length;e++){var p=c[e].split("h");if(2===p.length&&p[0]&&p[1]){var k=
p[0],l;k&&0<=f(k,"$")&&(k=k.split("$")[1]);if(0<=f(p[1],"v")){var h=p[1].split("v");2==h.length&&(l=h[1],p[1]=h[0])}if(!(h=a)){var h=n(k.split("_")[0]),q=m()%6E8;q<h&&(q+=6E8);h=h+9E5>q}h&&g(b,{frameId:k,b:p[1]})}}for(e=0;e<b.length;e++)b[e].visitId=l;return b}function fa(a){l("coo")&&!l("cooO")?(A||(A=[]),g(A,a)):a()}function ua(a){if(!l("coo")||l("cooO"))return a()}var B=window;if(!B.dT_||!B.dT_.cfg||"string"!=typeof B.dT_.cfg||B.dT_.initialized)B.console&&B.console.log("Initconfig not found or agent already initialized! This is an injection issue.");
else if(!(navigator.userAgent&&0<=navigator.userAgent.indexOf("RuxitSynthetic"))&&navigator.cookieEnabled){var na=window.setTimeout,R=window.sessionStorage,b={version:"10133171206150114",cfg:window.dT_&&window.dT_.cfg,ica:1};window.dT_=b;var la=window,pa=[];b.agentStartTime=m();b.nw=m;b.apush=g;b.st=ma;b.aBPSL=oa;b.gBPSL=function(){return pa};b.buildType="appmon";b.buildType="dynatrace";var $a={"!":"%21","~":"%7E","*":"%2A","(":"%28",")":"%29","'":"%27",$:"%24",";":"%3B",",":"%2C"};b.gSSV=qa;b.sSSV=
ra;b.pn=n;b.iVSC=va;b.io=f;b.dC=sa;b.sC=C;b.esc=ta;b.gSId=I;b.gDtc=J;b.gSC=S;b.sSC=T;b.gC=t;b.cRN=x;b.cRS=K;b.gEL=ya;b.gEBTN=xa;var V={ade:"",app:"",auto:!1,bandwidth:"300",bp1:!1,bp2:!1,bp:1,bs:!1,coo:!1,cooO:!1,cors:!1,csu:"",cux:!1,disableCookieManager:!1,disableLogging:!1,disableXhrFailures:!1,domain:"",domainOverride:"",doNotDetect:"",dsndb:!1,dsss:!1,euf:!1,evl:"",extblacklist:"",exteventsoff:!1,fa:!1,featureHash:"",ffi:!1,hvt:216E5,ign:"",instr:"",lab:!1,legacy:!1,lmut:!0,md:"",mdn:5E3,mepp:10,
moa:30,mrt:3,msl:3E4,ncw:!1,ntd:!1,oat:180,ote:!1,pui:!1,reportUrl:"",rid:"",ridPath:"",rpid:"",rt:1E4,rtl:0,rtp:2,rtt:1E3,rtu:200,sl:100,sosi:!1,spc:"",spl:!1,ssc:!1,st:3E3,svNB:!1,tp:"500,50,3",tvc:3E3,uam:!1,useNewCookies:!1,vcfi:!1,WST:!1,xb:"",xbp:null,xmut:!0,xt:0},e={reportUrl:"dynaTraceMonitor",initializedModules:"",csu:"dtagent",dataDtConfig:b.cfg},db={childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0},eb=["_DT_RENDERING_"],ga;try{ga=window.localStorage}catch(a){}(function(){var a=
e.dataDtConfig;"string"==typeof a&&-1==f(a,"#CONFIGSTRING")&&(D(a,e),W("domain"),W("auto"),W("app"),Ba(e))})();var Pa=xa("script"),Qa=ya(Pa),u,v;if(0<Qa)for(var H,Ra=e.csu+"_bootstrap.js",ha=0;ha<Qa;ha++)if(H=Pa[ha],H.attributes){var Sa=H.attributes.getNamedItem("data-dtconfig"),Q=H.src;if(Sa)if(v=bb(H.src,Sa.value),!u)u=v;else if("1"!=v.syntheticConfig){u=v;break}var ia=Q&&Q.indexOf(Ra);if(ia&&0<=ia){var Ta=ia+Ra.length+5;v||(v=e);v.app=Q.length>Ta?Q.substr(Ta):"Default%20Application"}}if(u)for(var ja in u)u.hasOwnProperty(ja)&&
(e[ja]=u[ja]);e.rx_visitID&&(b.rx_visitID=e.rx_visitID);(function(){var a=e.csu,a=(a.indexOf("dbg")==a.length-3?a.substr(0,a.length-3):a)+"_"+e.app+"_Store";try{var c=ga&&ga.getItem(a);if(c){var b=za(c),f=D(b.config,b).lastModification||"",g=e.lastModification||"",k=n(f.substr(0,13)),l=n(g.substr(0,13));if(!g||k>=l)for(var h in b)b.hasOwnProperty(h)&&("config"==h?D(b[h],e):e[h]=b[h])}}catch(fb){}})();Ca(e);try{var Ua=e.ign;if(Ua&&(new RegExp(Ua)).test(window.location.href)){document.dT_=window.dT_=
null;return}}catch(a){}var G="dtPC",w="dtCookie",Va="x-dtpc",Wa="x-dtreferer",ka="dtLatC";e.useNewCookies&&(G="rxpc",w="rxsession",ka="rxlatency",Va="x-rxpc",Wa="x-rxreferer");b.gSCN=function(){return w};b.gPCHN=function(){return Va};b.gRHN=function(){return Wa};b.pageContextCookieName=G;b.latencyCookieName=ka;b.mobileSessionIDCookieName="dtAdk";b.cfg=e;b.pCfg=za;b.pCSAA=D;b.cFHFAU=Ba;b.sCD=Ca;b.bcv=l;b.ncv=function(a){var b=n(U(a));isNaN(b)&&(b=n(V[a]));return b};b.scv=function(a){return String(U(a))};
b.stcv=ab;b.rplC=function(a){return e=a};var y=[];L(G);L(w);L(ka);L("rxvt");oa(function(a,b){0<y.length&&!b&&(a.a("dCN","duplicateCookieNames",function(){return y.join(",")},function(){return y.slice()}),y=[])});var z=b.agentStartTime%6E8+"_"+n(x(0,1E3));b.gFId=function(){return z};b.frameId=z;var Xa,M,E;try{Xa=R.getItem("dtDisabled")}catch(a){}(M=e.agentLocation)||(M=cb());E=e.agentname||"ruxitagentjs";E=t("dtUseDebugAgent")?e.debugName||E+"dbg":e.name||E;if(!l("auto")&&!l("legacy")&&!Xa){var Ya=
e.agentUri||Ea(e.featureHash);e.async?Da(Ya,e.async):document.write('<script type="text/javascript" src="'+Ya+'">\x3c/script>')}if(-1!=f(window.location.href,"_DT_RENDERING_")){var Za=b.RMOD={};M&&(Za.conf=db,Za.ignore=eb,Da(Ea("R"),!0))}var q;fa(function(){J()||T(-1*x(2,21)+"$"+K(32));q=I()});b.gcSId=function(){return q};var Ga=!1;fa(Fa);b.iNV=function(){return Ga};b.gVID=Fa;var ea,Ja=18E5,Na=216E5,Y=!0,da=!1,F=!1;if(e.hvt)try{Na=parseInt(e.hvt,10)}catch(a){}b.sVIdUP=function(){F=!0};b.sVTT=function(a){Ja=
a};b.sVIDP="rx_visitID";b.sVID=ba;b.rVID=Ha;b.gVI=X;b.gNVId=N;b.gARnVF=function(){var a=da;da=!1;return a};b.cAUV=function(){Ma()||P(!1)};b.uVT=P;Oa(1);b.gPC=O;b.cPC=Oa;b.sPC=ca;var A;t(w)&&(e.cooO=1);b.eWE=fa;b.oEIE=ua;b.eA=function(){for(var a=0;a<A.length;a++)na(A[a],0);A=[];e.cooO=1}}})();
</script>

  
  <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-47975624-1', 'auto');  // Replace with your property ID.
ga('send', 'pageview');
  </script>




  

</head>

<body    class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <div id="logo">
  	<div id="logoLeft">{</div>
  	<div id="logoText">sleepomeno</div>
  	<div id="logoRight">}</div>
  	<div class="clear"></div>
  </div>
  <h1><a href="/">while true live</a></h1>
  
    <h2>Musings on the fatality of infinite loops and other stuff.</h2>
  
  <div class="clear"></div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  

  <form action="/search" method="get">
  <fieldset role ="search">
    <input type="text" id="search-query" name="q" placeholder="Search" autocomplete="off" class="search" />
  </fieldset>
</form>


<ul class="main-navigation">
  <li><a href="/about-me/">About me</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      
        <h1 class="entry-title">Approximating PI With PureScript</h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2015-03-14T00:00:00+01:00" pubdate data-updated="true">Mar 14<span>th</span>, 2015</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Oh, it is Pi day! To be honest, I had not known about it until today
but it somehow made it into my Twitter stream. Well, after some relaxed Saturday morning browsing I stumbled across the <a href="http://demonstrations.wolfram.com/ApproximatingPiWithInscribedPolygons/" target="_blank">Wolfram Pi approximation demonstration</a>. It looks like this:</p>

<script type='text/javascript' src='http://demonstrations.wolfram.com/javascript/embed.js' ></script>


<script type='text/javascript'>var demoObj = new DEMOEMBED(); demoObj.run('ApproximatingPiWithInscribedPolygons', '', '389', '613');</script>


<div id='DEMO_ApproximatingPiWithInscribedPolygons'><a class='demonstrationHyperlink' href='http://demonstrations.wolfram.com/ApproximatingPiWithInscribedPolygons/' target='_blank'>Approximating Pi with Inscribed Polygons</a> from the <a class='demonstrationHyperlink' href='http://demonstrations.wolfram.com/' target='_blank'>Wolfram Demonstrations Project</a> by Rob Morris</div>


<br />


<p>Pi is approximated by computing the area of the inscribed
polygon and by dividing that area by the square of the circle radius &ndash;
after all, the area of a circle is <strong>r²π</strong>. Obviously, that idea is
that beautiful and so simple that Pi has thus been approximated thousands of
years ago (of course, there are many better and faster ways!), so
I decided to implement it myself.</p>

<!-- more -->


<h2>PureScript</h2>

<p>Some days ago I stumbled across <strong>PureScript</strong> which compiles to
JavaScript. It is heavily influenced by Haskell and shares its quality
of static typing. However, it has been designed to target JavaScript
from the getgo such that it incorporates the strict evaluation
semantics of JavaScript. In addition, it provides a syntax similar to
native JavaScript for accessing object properties. Given some Haskell knowledge,
PureScript seems to be a decent alternative to Fay or Haste for
creating Javascript code! So I thought I would give
it a try and implement something similar to the above Wolfram
demonstration! So this is the result I accomplished after one day&rsquo;s
work on a <a href="/pi/html/index.html" target="_blank">PureScript clone</a>:</p>

<iframe src="/pi/html/index.html" width="500" height="720" style="margin:auto;display:block"></iframe>


<h3>PureScript learning resources</h3>

<p>First of all these are the best resources on PureScript development that I found:</p>

<ul><li>

<a href="https://gist.github.com/paf31/8e9177b20ee920480fbc" target="_blank">24 days of PureScript</a>

</li><li>

<a href="https://leanpub.com/purescript" target="_blank">PureScript by Example</a> - very detailed but excellent!

</li><li>

<a href="https://github.com/purescript/purescript/wiki" target="_blank">PureScript Wiki</a> 

</li></ul>


<p><a href="https://gist.github.com/paf31/8e9177b20ee920480fbc" target="_blank">24 days of PureScript</a> gives a very good overview of the PureScript
library landscape. Above all, running code for every introduced
library is given which is crucial to getting quickly started. In
addition, there is a project called <a href="http://pursuit.purescript.org/" target="_blank">Pursuit</a> which provides a search
engine for functions of PureScript packages. It is still far from
being as useful as Hoogle or Hayoo for Haskell development, though.</p>

<h2>PureScript libraries and building process</h2>

<p>PureScript libraries are managed by <strong>bower</strong> which has worked
surprisingly well for me. However, at the beginning I had problems getting the interpreter <code>psci</code> running with
all dependencies as I&rsquo;m not used to <strong>grunt</strong> (and <strong>npm</strong>) which are
typically needed in the whole building process. Anyway, when I decided
to use certain PureScript libraries for my implementation their
integration worked like a charm!</p>

<h2>HTML5 Canvas bindings</h2>

<p>PureScript has very decent wrappers of the HTML5 Canvas API in form
of <code>purescript-canvas</code> and <code>purescript-free-canvas</code>. Obviously, I made
heavy use of those to get the circle and the polygon drawn.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='haskell'><span class='line'><span class="nf">center</span> <span class="ow">=</span> <span class="p">{</span> <span class="n">x</span> <span class="kt">:</span> <span class="mi">210</span><span class="p">,</span> <span class="n">y</span> <span class="kt">:</span> <span class="mi">210</span> <span class="p">}</span>
</span><span class='line'><span class="nf">drawCircle</span> <span class="ow">=</span> <span class="kr">do</span>
</span><span class='line'>  <span class="n">arc</span> <span class="p">{</span> <span class="n">x</span><span class="kt">:</span> <span class="n">center</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="kt">:</span> <span class="n">center</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">r</span><span class="kt">:</span> <span class="n">radius</span><span class="p">,</span> <span class="n">start</span><span class="kt">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="kt">:</span> <span class="kt">Math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="mi">2</span> <span class="p">}</span>
</span><span class='line'>  <span class="n">setFillStyle</span> <span class="s">&quot;#000000&quot;</span>
</span><span class='line'>  <span class="n">fill</span>
</span></code></pre></td></tr></table></div></figure>


<p>As an argument to <code>arc</code> we actually have an example of the <em>Object</em>
syntax of PureScript which is just like native JavaScript.</p>

<h2>Angular, React or something else?</h2>

<p>PureScript does have bindings to AngularJS and React (find PureScript
libraries by <a href="http://bower.io/search/?q=purescript" target="_blank">searching bower</a>), however, they are both still
experimental and alpha. So I somehow didn&rsquo;t want to commit to something
half-working which could be very hard to understand for a PureScript
newbie like me. Anyway, I decided that the JQuery binding of
<code>purescript-jquery</code> should be enough for my Pi approximation application; in the end, I
also used <code>purescript-rx</code> (also mentioned on <a href="https://gist.github.com/paf31/8e9177b20ee920480fbc" target="_blank">24 days of PureScript)</a>
but I only scratched the surface of reactive PureScript UI modelling.</p>

<h2>What about the slider?</h2>

<p>I definitely wanted a fancy slider for setting the number of vertices
of the polygon like in the Wolfram demo &ndash; without
too much ado, I immediately decided on using the vanilla <a href="http://jqueryui.com/slider/" target="_blank">JQuery-UI
slider</a>. Copy-Paste. That however means that my PureScript has to
somehow interact with the native slider JavaScript.</p>

<h2>The main function</h2>

<p>The first few lines are about getting representations of the HTML
elements with <code>purescript-jquery</code>. Then I define event handlers for
changing the number of vertices and for toggling the checkbox to
show/hide the triangles. <code>onAsObservable</code> actually is from the
<code>purescript-rx</code> binding to the reactive <a href="https://github.com/Reactive-Extensions/RxJS" target="_blank">RxJS</a> libraries which could be
used to define complex event handling.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='haskell'><span class='line'><span class="nf">main</span> <span class="ow">=</span> <span class="kr">do</span>
</span><span class='line'>  <span class="n">canvas</span> <span class="ow">&lt;-</span> <span class="n">getCanvasElementById</span> <span class="s">&quot;canvas&quot;</span>
</span><span class='line'>  <span class="n">context</span> <span class="ow">&lt;-</span> <span class="n">getContext2D</span> <span class="n">canvas</span>
</span><span class='line'>  <span class="n">verticesInput</span> <span class="ow">&lt;-</span> <span class="n">select</span> <span class="s">&quot;#vertices&quot;</span>
</span><span class='line'>  <span class="n">polygonArea</span> <span class="ow">&lt;-</span> <span class="n">select</span> <span class="s">&quot;#polygonArea&quot;</span>
</span><span class='line'>  <span class="n">pi</span> <span class="ow">&lt;-</span> <span class="n">select</span> <span class="s">&quot;#pi&quot;</span>
</span><span class='line'>  <span class="n">triangles</span> <span class="ow">&lt;-</span> <span class="n">select</span> <span class="s">&quot;#triangles&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="kr">let</span> <span class="n">updateUI</span> <span class="n">num</span> <span class="n">showTriangles</span> <span class="ow">=</span> <span class="kr">do</span>
</span><span class='line'>          <span class="p">{</span> <span class="n">pArea</span> <span class="kt">:</span> <span class="n">polygonAreaPercent</span><span class="p">,</span> <span class="n">pi</span> <span class="kt">:</span> <span class="n">piApprox</span> <span class="p">}</span> <span class="ow">&lt;-</span> <span class="n">showPolygon</span> <span class="n">canvas</span> <span class="n">context</span> <span class="n">num</span> <span class="n">showTriangles</span>
</span><span class='line'>          <span class="n">setText</span> <span class="p">(</span><span class="n">show</span> <span class="n">polygonAreaPercent</span> <span class="o">&lt;&gt;</span> <span class="s">&quot;%&quot;</span><span class="p">)</span> <span class="n">polygonArea</span>
</span><span class='line'>          <span class="n">setText</span> <span class="p">(</span><span class="n">show</span> <span class="n">piApprox</span><span class="p">)</span> <span class="n">pi</span>
</span><span class='line'>  <span class="kr">let</span> <span class="n">updateUI&#39;</span> <span class="ow">=</span> <span class="kr">do</span>
</span><span class='line'>              <span class="n">showTriangles</span> <span class="ow">&lt;-</span> <span class="p">((</span><span class="o">==</span> <span class="s">&quot;true&quot;</span><span class="p">)</span> <span class="o">&lt;&lt;&lt;</span> <span class="n">stringify</span><span class="p">)</span> <span class="o">&lt;$&gt;</span> <span class="n">getProp</span> <span class="s">&quot;checked&quot;</span> <span class="n">triangles</span>
</span><span class='line'>              <span class="n">num</span> <span class="ow">&lt;-</span> <span class="p">(</span><span class="n">stringify</span> <span class="o">&gt;&gt;&gt;</span> <span class="n">readInt</span> <span class="mi">10</span><span class="p">)</span> <span class="o">&lt;$&gt;</span> <span class="n">getValue</span> <span class="n">verticesInput</span>
</span><span class='line'>              <span class="n">updateUI</span> <span class="n">num</span> <span class="n">showTriangles</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">trianglesChange</span> <span class="ow">&lt;-</span> <span class="s">&quot;click&quot;</span> <span class="p">`</span><span class="n">onAsObservable</span><span class="p">`</span> <span class="n">triangles</span>
</span><span class='line'>  <span class="n">trianglesChange</span> <span class="p">`</span><span class="n">subscribe</span><span class="p">`</span> <span class="nf">\</span><span class="kr">_</span> <span class="ow">-&gt;</span> <span class="n">void</span> <span class="n">updateUI&#39;</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">verticesChange</span> <span class="ow">&lt;-</span> <span class="s">&quot;focus&quot;</span> <span class="p">`</span><span class="n">onAsObservable</span><span class="p">`</span> <span class="n">verticesInput</span>
</span><span class='line'>  <span class="n">verticesChange</span> <span class="p">`</span><span class="n">subscribe</span><span class="p">`</span> <span class="nf">\</span><span class="kr">_</span> <span class="ow">-&gt;</span> <span class="n">void</span> <span class="n">updateUI&#39;</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">updateUI</span> <span class="n">defaultVertices</span> <span class="n">defaultShowTriangles</span>
</span></code></pre></td></tr></table></div></figure>


<h2>The Foreign Function Interface</h2>

<p>In the above code I accessed the current value of the checkbox and the
slider value with the <code>purescript-jquery</code> functions <code>getValue</code> and
<code>getProp</code>. However, it was surprisingly difficult to use those values
as they were not of type <code>String</code> but <code>Foreign</code> and I got those
dragged into the field of the Foreign Function Interface for
communicating with JavaScript code. Anyway, after some digging in I
ended up writing the function <code>stringify</code> which trivially transforms the
incoming Javascript value to a <code>String</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='haskell'><span class='line'><span class="nf">foreign</span> <span class="kr">import</span> <span class="nn">stringify</span>
</span><span class='line'>  <span class="s">&quot;function stringify(x) {</span><span class="se">\</span>
</span><span class='line'><span class="se"> \</span><span class="s">  return x+</span><span class="se">\&quot;\&quot;</span><span class="s">;</span><span class="se">\</span>
</span><span class='line'><span class="se"> \</span><span class="s">}&quot;</span> <span class="ow">::</span> <span class="kt">Foreign</span> <span class="ow">-&gt;</span> <span class="kt">String</span>
</span></code></pre></td></tr></table></div></figure>


<p>That&rsquo;s an example of how you can integrate JavaScript functions in
PureScript. It is a little bit of a joke as of now sice you need to add all
those backslashes, however, things might get easier in case PureScript
gets a meta programming facility like <strong>TemplateHaskell</strong> in the Haskell
world in the future.</p>

<h2>Conclusion</h2>

<p>All in all, PureScript really makes a nice impression. There is already
a surprising number of libraries available; decent, mature bindings to
Angular or React would be crucial for getting easy web development
adoption, though. Meta programming integration of JavaScript code would
also prove very nice as would be Source Map support&#x2026; anyway, I&rsquo;m
looking forward to using it again and might get into improving it myself.</p>

<p>PS: You find the code for the PureScript application on <a href="https://github.com/sleepomeno/InscribePolygons" target="_blank">my GitHub</a>.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Gregor Riegler</span></span>

      








  


<time datetime="2015-03-14T00:00:00+01:00" pubdate data-updated="true">Mar 14<span>th</span>, 2015</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/programming/'>programming</a>, <a class='category' href='/blog/categories/web/'>web</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://sleepomeno.github.io/blog/2015/03/14/Approximating-PI-with-PureScript/" data-via="" data-counturl="http://sleepomeno.github.io/blog/2015/03/14/Approximating-PI-with-PureScript/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left articlenav" href="/blog/2015/02/20/Partial-matching-in-R/" title="Previous Post: Partial matching in R">&laquo; Partial matching in R</a>
      
      
        <a class="basic-alignment right articlenav" href="/blog/2015/09/08/Historical-ELO-Tennis-Rating/" title="Next Post: Historical Elo Tennis Rating">Historical Elo Tennis Rating &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2017/04/02/Generating-random-Enum-values/">Rolling the Dice Using Random Enum Values</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/09/13/Toying-with-Racket/">Toying With Racket</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/09/08/Historical-ELO-Tennis-Rating/">Historical Elo Tennis Rating</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/03/14/Approximating-PI-with-PureScript/">Approximating PI With PureScript</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/20/Partial-matching-in-R/">Partial Matching in R</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Tag Cloud</h1>
	<div id="tagcloud"><a style="font-size: 16px" href="/tags/c/">C</a>  
<a style="font-size: 16px" href="/tags/st/">ST</a>  
<a style="font-size: 16px" href="/tags/analytics/">analytics</a>  
<a style="font-size: 16px" href="/tags/android/">android</a>  
<a style="font-size: 16px" href="/tags/app/">app</a>  
<a style="font-size: 23px" href="/tags/blog/">blog</a>  
<a style="font-size: 16px" href="/tags/book/">book</a>  
<a style="font-size: 16px" href="/tags/enum/">enum</a>  
<a style="font-size: 16px" href="/tags/evil/">evil</a>  
<a style="font-size: 16px" href="/tags/extension/">extension</a>  
<a style="font-size: 16px" href="/tags/functional/">functional</a>  
<a style="font-size: 16px" href="/tags/ghc/">ghc</a>  
<a style="font-size: 16px" href="/tags/git/">git</a>  
<a style="font-size: 16px" href="/tags/github/">github</a>  
<a style="font-size: 20px" href="/tags/graphics/">graphics</a>  
<a style="font-size: 28px" href="/tags/haskell/">haskell</a>  
<a style="font-size: 16px" href="/tags/javascript/">javascript</a>  
<a style="font-size: 16px" href="/tags/jquery/">jquery</a>  
<a style="font-size: 16px" href="/tags/laziness/">laziness</a>  
<a style="font-size: 16px" href="/tags/markdown/">markdown</a>  
<a style="font-size: 16px" href="/tags/maybe/">maybe</a>  
<a style="font-size: 16px" href="/tags/monadplus/">monadplus</a>  
<a style="font-size: 16px" href="/tags/mutation/">mutation</a>  
<a style="font-size: 16px" href="/tags/performance/">performance</a>  
<a style="font-size: 16px" href="/tags/plaintext/">plaintext</a>  
<a style="font-size: 16px" href="/tags/productivity/">productivity</a>  
<a style="font-size: 16px" href="/tags/purescript/">purescript</a>  
<a style="font-size: 20px" href="/tags/r/">r</a>  
<a style="font-size: 16px" href="/tags/racket/">racket</a>  
<a style="font-size: 16px" href="/tags/random/">random</a>  
<a style="font-size: 16px" href="/tags/rankntypes/">rankntypes</a>  
<a style="font-size: 16px" href="/tags/scm/">scm</a>  
<a style="font-size: 20px" href="/tags/statistics/">statistics</a>  
<a style="font-size: 16px" href="/tags/svn/">svn</a>  
<a style="font-size: 16px" href="/tags/syntax/">syntax</a>  
<a style="font-size: 16px" href="/tags/xmonad/">xmonad</a>
</div>
</section>
<section>
  <h1>Recent Comments</h1>
  <div id="dsq-recentcomments" class="dsq-widget"><script type="text/javascript" src="http://disqus.com/forums/sleepomeno/recent_comments_widget.js?hide_avatars=1&num_items=3"></script></div>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2017 - Gregor Riegler -
	<span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
	<span class="followTwitter"><a href="https://twitter.com/GregorRiegler" class="twitter-follow-button" data-show-count="false">Follow @GregorRiegler</a></span>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'sleepomeno';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://sleepomeno.github.io/blog/2015/03/14/Approximating-PI-with-PureScript/';
        var disqus_url = 'http://sleepomeno.github.io/blog/2015/03/14/Approximating-PI-with-PureScript/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
